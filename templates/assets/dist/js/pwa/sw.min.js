const n='chirpy-{{ "now" | date: "%Y%m%d.%H%M%S" }}';function c(e){for(const t of allowedDomains)if(RegExp(`^http(s)?://${t}/`).test(e))return!0;return!1}function u(e){for(const t of denyUrls)if(e===t)return!0;return!1}self.addEventListener("install",e=>{e.waitUntil(caches.open(n).then(t=>t.addAll(resource)))});self.addEventListener("activate",e=>{e.waitUntil(caches.keys().then(t=>Promise.all(t.map(r=>{if(r!==n)return caches.delete(r)}))))});self.addEventListener("message",e=>{e.data==="SKIP_WAITING"&&self.skipWaiting()});self.addEventListener("fetch",e=>{e.respondWith(caches.match(e.request).then(t=>t||fetch(e.request).then(r=>{const s=e.request.url;if(e.request.method!=="GET"||!c(s)||u(s))return r;let a=r.clone();return caches.open(n).then(i=>{i.put(e.request,a)}),r})))});
