{"version":3,"file":"search-display-v1.0.2.min.js","sources":["../../../../../../src/js/modules/components/search-display.js"],"sourcesContent":["/**\r\n * This script make #search-result-wrapper switch to unloaded or shown automatically.\r\n */\r\nconst $btnSbTrigger = $('#sidebar-trigger');\r\nconst $btnSearchTrigger = $('#search-trigger');\r\nconst $btnCancel = $('#search-cancel');\r\nconst $content = $('#main>.row');\r\nconst $topbarTitle = $('#topbar-title');\r\nconst $searchWrapper = $('#search-wrapper');\r\nconst $resultWrapper = $('#search-result-wrapper');\r\nconst $results = $('#search-results');\r\nconst $input = $('#search-input');\r\nconst $hints = $('#search-hints');\r\nconst $viewport = $('html,body');\r\n\r\n// class names\r\nconst C_LOADED = 'loaded';\r\nconst C_UNLOADED = 'unloaded';\r\nconst C_FOCUS = 'input-focus';\r\nconst C_FLEX = 'd-flex';\r\n\r\nclass ScrollBlocker {\r\n  static offset = 0;\r\n  static resultVisible = false;\r\n\r\n  static on() {\r\n    ScrollBlocker.offset = window.scrollY;\r\n    $viewport.scrollTop(0);\r\n  }\r\n\r\n  static off() {\r\n    $viewport.scrollTop(ScrollBlocker.offset);\r\n  }\r\n}\r\n\r\n/*--- Actions in mobile screens (Sidebar hidden) ---*/\r\nclass MobileSearchBar {\r\n  static on() {\r\n    $btnSbTrigger.addClass(C_UNLOADED);\r\n    $topbarTitle.addClass(C_UNLOADED);\r\n    $btnSearchTrigger.addClass(C_UNLOADED);\r\n    $searchWrapper.addClass(C_FLEX);\r\n    $btnCancel.addClass(C_LOADED);\r\n  }\r\n\r\n  static off() {\r\n    $btnCancel.removeClass(C_LOADED);\r\n    $searchWrapper.removeClass(C_FLEX);\r\n    $btnSbTrigger.removeClass(C_UNLOADED);\r\n    $topbarTitle.removeClass(C_UNLOADED);\r\n    $btnSearchTrigger.removeClass(C_UNLOADED);\r\n  }\r\n}\r\n\r\nclass ResultSwitch {\r\n  static on() {\r\n    if (!ScrollBlocker.resultVisible) {\r\n      // the block method must be called before $(#main) unloaded.\r\n      ScrollBlocker.on();\r\n      $resultWrapper.removeClass(C_UNLOADED);\r\n      $content.addClass(C_UNLOADED);\r\n      ScrollBlocker.resultVisible = true;\r\n    }\r\n  }\r\n\r\n  static off() {\r\n    if (ScrollBlocker.resultVisible) {\r\n      $results.empty();\r\n      if ($hints.hasClass(C_UNLOADED)) {\r\n        $hints.removeClass(C_UNLOADED);\r\n      }\r\n      $resultWrapper.addClass(C_UNLOADED);\r\n      $content.removeClass(C_UNLOADED);\r\n\r\n      // now the release method must be called after $(#main) display\r\n      ScrollBlocker.off();\r\n\r\n      $input.val('');\r\n      ScrollBlocker.resultVisible = false;\r\n    }\r\n  }\r\n}\r\n\r\nfunction isMobileView() {\r\n  return $btnCancel.hasClass(C_LOADED);\r\n}\r\n\r\nexport function displaySearch() {\r\n  $btnSearchTrigger.on('click', function () {\r\n    MobileSearchBar.on();\r\n    ResultSwitch.on();\r\n    $input.trigger('focus');\r\n  });\r\n\r\n  $btnCancel.on('click', function () {\r\n    MobileSearchBar.off();\r\n    ResultSwitch.off();\r\n  });\r\n\r\n  $input.on('focus', function () {\r\n    $searchWrapper.addClass(C_FOCUS);\r\n  });\r\n\r\n  $input.on('focusout', function () {\r\n    $searchWrapper.removeClass(C_FOCUS);\r\n  });\r\n\r\n  $input.on('input', () => {\r\n    if ($input.val() === '') {\r\n      if (isMobileView()) {\r\n        $hints.removeClass(C_UNLOADED);\r\n      } else {\r\n        ResultSwitch.off();\r\n      }\r\n    } else {\r\n      ResultSwitch.on();\r\n      if (isMobileView()) {\r\n        $hints.addClass(C_UNLOADED);\r\n      }\r\n    }\r\n  });\r\n}\r\n"],"names":["$btnSbTrigger","$btnSearchTrigger","$btnCancel","$content","$topbarTitle","$searchWrapper","$resultWrapper","$results","$input","$hints","$viewport","C_LOADED","C_UNLOADED","C_FOCUS","C_FLEX","_ScrollBlocker","__publicField","ScrollBlocker","MobileSearchBar","ResultSwitch","isMobileView","displaySearch"],"mappings":"wKAGA,MAAMA,EAAgB,EAAE,kBAAkB,EACpCC,EAAoB,EAAE,iBAAiB,EACvCC,EAAa,EAAE,gBAAgB,EAC/BC,EAAW,EAAE,YAAY,EACzBC,EAAe,EAAE,eAAe,EAChCC,EAAiB,EAAE,iBAAiB,EACpCC,EAAiB,EAAE,wBAAwB,EAC3CC,EAAW,EAAE,iBAAiB,EAC9BC,EAAS,EAAE,eAAe,EAC1BC,EAAS,EAAE,eAAe,EAC1BC,EAAY,EAAE,WAAW,EAGzBC,EAAW,SACXC,EAAa,WACbC,EAAU,cACVC,EAAS,SAETC,EAAN,MAAMA,CAAc,CAIlB,OAAO,IAAK,CACVA,EAAc,OAAS,OAAO,QAC9BL,EAAU,UAAU,CAAC,CACtB,CAED,OAAO,KAAM,CACXA,EAAU,UAAUK,EAAc,MAAM,CACzC,CACH,EAXEC,EADID,EACG,SAAS,GAChBC,EAFID,EAEG,gBAAgB,IAFzB,IAAME,EAANF,EAeA,MAAMG,CAAgB,CACpB,OAAO,IAAK,CACVlB,EAAc,SAASY,CAAU,EACjCR,EAAa,SAASQ,CAAU,EAChCX,EAAkB,SAASW,CAAU,EACrCP,EAAe,SAASS,CAAM,EAC9BZ,EAAW,SAASS,CAAQ,CAC7B,CAED,OAAO,KAAM,CACXT,EAAW,YAAYS,CAAQ,EAC/BN,EAAe,YAAYS,CAAM,EACjCd,EAAc,YAAYY,CAAU,EACpCR,EAAa,YAAYQ,CAAU,EACnCX,EAAkB,YAAYW,CAAU,CACzC,CACH,CAEA,MAAMO,CAAa,CACjB,OAAO,IAAK,CACLF,EAAc,gBAEjBA,EAAc,GAAE,EAChBX,EAAe,YAAYM,CAAU,EACrCT,EAAS,SAASS,CAAU,EAC5BK,EAAc,cAAgB,GAEjC,CAED,OAAO,KAAM,CACPA,EAAc,gBAChBV,EAAS,MAAK,EACVE,EAAO,SAASG,CAAU,GAC5BH,EAAO,YAAYG,CAAU,EAE/BN,EAAe,SAASM,CAAU,EAClCT,EAAS,YAAYS,CAAU,EAG/BK,EAAc,IAAG,EAEjBT,EAAO,IAAI,EAAE,EACbS,EAAc,cAAgB,GAEjC,CACH,CAEA,SAASG,GAAe,CACtB,OAAOlB,EAAW,SAASS,CAAQ,CACrC,CAEO,SAASU,GAAgB,CAC9BpB,EAAkB,GAAG,QAAS,UAAY,CACxCiB,EAAgB,GAAE,EAClBC,EAAa,GAAE,EACfX,EAAO,QAAQ,OAAO,CAC1B,CAAG,EAEDN,EAAW,GAAG,QAAS,UAAY,CACjCgB,EAAgB,IAAG,EACnBC,EAAa,IAAG,CACpB,CAAG,EAEDX,EAAO,GAAG,QAAS,UAAY,CAC7BH,EAAe,SAASQ,CAAO,CACnC,CAAG,EAEDL,EAAO,GAAG,WAAY,UAAY,CAChCH,EAAe,YAAYQ,CAAO,CACtC,CAAG,EAEDL,EAAO,GAAG,QAAS,IAAM,CACnBA,EAAO,IAAK,IAAK,GACfY,EAAY,EACdX,EAAO,YAAYG,CAAU,EAE7BO,EAAa,IAAG,GAGlBA,EAAa,GAAE,EACXC,EAAY,GACdX,EAAO,SAASG,CAAU,EAGlC,CAAG,CACH"}